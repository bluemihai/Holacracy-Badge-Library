%h1 Roles and Attention Points

.adjacent-tables-wrapper
  .adjacent-table
    %table#roles-table.compact.large-7.small-12.columns
      %thead
        %tr
          %th Role Name
          %th Filler
          %th Pts
          %th Alloc
          %th Left
          %th Super Circle
          / %th
          / %th
          %th
          %th
      %tbody
        - @roles.each do |role|
          %tr
            %td= link_to role.name, role
            %td= role.filler.try(:short)
            %td= role.points
            %td= role.delegated
            %td= role.controlled
            %td= role.circle.try(:name)
            / %td= link_to 'Show', role
            %td= link_to 'Edit', edit_role_path(role)
            / %td= link_to 'Destroy', role, :method => :delete, :data => { :confirm => 'Are you sure?' }
            %td= link_to 'Fill', assign_role_path(role, User.random), title: 'Assign Randomly to one of 5 users'
  .width-30
  .adjacent-table
    %table#fillers-table.compact.large-5.small-12.columns
      %thead
        %tr
          %th User Name
          %th Roles
          %th Pts
          %th % Focus
      %tbody
        - if @users
          - @users.each do |user|
            %tr
              %td= user.name
              %td= user.roles.map(&:name).join(', ')
              %td= user.attention_points
              %td.text-right= number_to_percentage(user.percent_focus * 100, precision: 1)
